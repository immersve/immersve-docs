<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-contracts/payment-protocol">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Immersve Payment Protocol | Immersve Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.immersve.com/contracts/payment-protocol"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Immersve Payment Protocol | Immersve Documentation"><meta data-rh="true" name="description" content="Contract Module that allows users to deposit and lock funds in order to be able to fund one-time-use Immersve virtual cards."><meta data-rh="true" property="og:description" content="Contract Module that allows users to deposit and lock funds in order to be able to fund one-time-use Immersve virtual cards."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.immersve.com/contracts/payment-protocol"><link data-rh="true" rel="alternate" href="https://docs.immersve.com/contracts/payment-protocol" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.immersve.com/contracts/payment-protocol" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.ea8276bc.css">
<link rel="preload" href="/assets/js/runtime~main.eef1a545.js" as="script">
<link rel="preload" href="/assets/js/main.cbc65626.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-light.png" alt="Immersve Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo-dark.png" alt="Immersve Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/guides/introduction">Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/category/api-reference">API Reference</a><button aria-label="Toggle the collapsible sidebar category &#x27;API Reference&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/api-reference/authentication">Authentication</a><button aria-label="Toggle the collapsible sidebar category &#x27;Authentication&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/api-reference/accounts-custodial">Accounts (Custodial)</a><button aria-label="Toggle the collapsible sidebar category &#x27;Accounts (Custodial)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/api-reference/assets">Assets</a><button aria-label="Toggle the collapsible sidebar category &#x27;Assets&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/api-reference/card">Cards</a><button aria-label="Toggle the collapsible sidebar category &#x27;Cards&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/api-reference/cards-custodial">Cards (Custodial)</a><button aria-label="Toggle the collapsible sidebar category &#x27;Cards (Custodial)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/api-reference/currency">Currency</a><button aria-label="Toggle the collapsible sidebar category &#x27;Currency&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/api-reference/transactions">Transactions</a><button aria-label="Toggle the collapsible sidebar category &#x27;Transactions&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/api-reference/kyc-custodial">KYC (Custodial)</a><button aria-label="Toggle the collapsible sidebar category &#x27;KYC (Custodial)&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/contracts/payment-protocol">Smart Contracts</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/contracts/payment-protocol">Immersve Payment Protocol</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_BDYx"><div class="docItemContainer_oq1c"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Smart Contracts</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Immersve Payment Protocol</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_VWUt"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown theme-api-markdown markdown"><div class="row"><div class="col col--12"><h1>Immersve Payment Protocol</h1><p>Contract Module that allows users to deposit and lock funds in order to be able to fund one-time-use Immersve virtual cards.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="extensions">Extensions<a class="hash-link" href="#extensions" title="Direct link to heading">​</a></h2><p>For security reasons, the smart contract implements the following <a href="https://docs.openzeppelin.com/contracts/4.x/" target="_blank" rel="noopener noreferrer">OpenZeppelin Contracts</a></p><ul><li><a href="https://docs.openzeppelin.com/contracts/4.x/api/proxy#Initializable" target="_blank" rel="noopener noreferrer">Initializable</a></li><li><a href="https://docs.openzeppelin.com/contracts/4.x/api/access#AccessControl" target="_blank" rel="noopener noreferrer">AccessControl</a></li><li><a href="https://docs.openzeppelin.com/contracts/4.x/api/security#Pausable" target="_blank" rel="noopener noreferrer">Pausable</a></li><li><a href="https://docs.openzeppelin.com/contracts/4.x/api/security#ReentrancyGuard" target="_blank" rel="noopener noreferrer">ReentrancyGuard</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="proxy">Proxy<a class="hash-link" href="#proxy" title="Direct link to heading">​</a></h2><p>The Smart Contract implements the OpenZeppelin <a href="https://docs.openzeppelin.com/contracts/4.x/api/proxy#TransparentUpgradeableProxy" target="_blank" rel="noopener noreferrer">TransparentUpgradeable</a> proxy. Proxy features:</p><ul><li><strong>Security</strong>: If any bugs are found, or potential security risks, the Smart Contract can be updated to resolve any potential issues</li><li><strong>Feature Upgradeability</strong>: Any new features and bug fixes can be added. The Smart Contract will keep the same state, without the need of expensive migrations</li><li><strong>Stability</strong>: Clients interacting with the Smart Contract will always do so through the same proxy address. The proxy will know the current implementation address and will always keep the same state.</li></ul><p>More about upgradeable contracts here: <a href="https://blog.openzeppelin.com/the-state-of-smart-contract-upgrades/" target="_blank" rel="noopener noreferrer">https://blog.openzeppelin.com/the-state-of-smart-contract-upgrades/</a></p><div class="mermaid" data-mermaid-src="graph LR
    Client -- Trx --&gt; Proxy[(Proxy)]
    Proxy -- &quot;getImplementation()&quot; --&gt; Proxy
    Proxy -- old --&gt; v1{{ContractImplV1}}
    Proxy -- &quot;delegate call&quot; --&gt; v2{{ContractImplV2}}">graph LR
    Client -- Trx --&gt; Proxy[(Proxy)]
    Proxy -- &quot;getImplementation()&quot; --&gt; Proxy
    Proxy -- old --&gt; v1{{ContractImplV1}}
    Proxy -- &quot;delegate call&quot; --&gt; v2{{ContractImplV2}}</div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="proxy-urls">Proxy URLs<a class="hash-link" href="#proxy-urls" title="Direct link to heading">​</a></h2><ul><li>Polygon (Mainnet): <strong><em>PENDING</em></strong></li><li>Polygon Mumbai (Testnet): <a href="https://mumbai.polygonscan.com/address/0xd73c2deE4604a1af3Db4E8E07Cf6Fb798aB77982#code" target="_blank" rel="noopener noreferrer">0xd73c2deE4604a1af3Db4E8E07Cf6Fb798aB77982</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="functions">Functions<a class="hash-link" href="#functions" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="initializeaddress-_settlerrole-address-payable-_settlementaddress-address-_tokensmartcontract-uint256-_defaulttimeoutblocks-uint256-_safetyblocks-external-initializer"><code>initialize</code>(address _settlerRole, address payable _settlementAddress, address _tokenSmartContract, uint256 _defaultTimeoutBlocks, uint256 _safetyBlocks) external initializer<a class="hash-link" href="#initializeaddress-_settlerrole-address-payable-_settlementaddress-address-_tokensmartcontract-uint256-_defaulttimeoutblocks-uint256-_safetyblocks-external-initializer" title="Direct link to heading">​</a></h3><blockquote><p>Initialize the Smart Contract with the required arguments</p><ul><li><code>_settlerRole</code> (type <code>address</code>): The web3 address that will act with the <code>SETTLER</code> role.</li><li><code>_settlementAddress</code> (type <code>address payable</code>): The web3 address were Locked funds will be sent once a payment is confirmed by Immersve</li><li><code>_tokenSmartContract</code> (type <code>address</code>): The current network address of the ERC-20 token Smart Contract</li><li><code>_defaultTimeoutBlocks</code> (type <code>uint256</code>): Number of blocks in the blockchain that an asset lock will last by default</li><li><code>_safetyBlocks</code> (type <code>uint256</code>): Number of blocks on top of the default timeout used to calculate if a Lock is usable or not. Because there might be a delay between a transaction confirmation and the actual use of Locked funds by Immersve, there has to be some safety threshold for Immersve to execute the settlement of funds.</li></ul></blockquote><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="getversion-external-pure-returnsstring-memory"><code>getVersion()</code> external pure returns(string memory)<a class="hash-link" href="#getversion-external-pure-returnsstring-memory" title="Direct link to heading">​</a></h3><blockquote><p>Get the current version implementation of the smart contract with a Version number stored in a Solidity Constant. This means that the constant is not saved into the Smart Contract store.</p></blockquote><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pause-public-onlyrolepauser_role"><code>pause()</code> public onlyRole(PAUSER_ROLE)<a class="hash-link" href="#pause-public-onlyrolepauser_role" title="Direct link to heading">​</a></h3><blockquote><p>Pauses the functionality of the Smart Contract. All the functions marked with the <code>whenNotPaused</code> modifier will reject the transaction once a pause is in effect. Only the <code>PAUSER_ROLE</code> will be able to call this function.</p></blockquote><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="unpause-public-onlyrolepauser_role"><code>unpause()</code> public onlyRole(PAUSER_ROLE)<a class="hash-link" href="#unpause-public-onlyrolepauser_role" title="Direct link to heading">​</a></h3><blockquote><p>Unpauses the functionality of the Smart Contract. All the functions marked with the <code>whenNotPaused</code> modifier will accept the transaction normally. Only the <code>PAUSER_ROLE</code> will be able to call this function.</p></blockquote><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="settimeoutblocksuint256-timeoutblocks-public-onlyrolesettler_role"><code>setTimeoutBlocks</code>(uint256 timeoutBlocks) public onlyRole(SETTLER_ROLE)<a class="hash-link" href="#settimeoutblocksuint256-timeoutblocks-public-onlyrolesettler_role" title="Direct link to heading">​</a></h3><blockquote><p>Set the default timeout for <code>AssetLockedFund</code> as described  in <code>Asset Locked Funds</code> section. Only the <code>SETTLER_ROLE</code> will be able to call this function.</p><ul><li><code>timeoutBlocks</code> (type <code>uint256</code>): Number of blocks for an Asset Lock to be considered expired</li></ul></blockquote><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="setsafetyblocksuint256-timeoutblocks-public-onlyrolesettler_role"><code>setSafetyBlocks</code>(uint256 timeoutBlocks) public onlyRole(SETTLER_ROLE)<a class="hash-link" href="#setsafetyblocksuint256-timeoutblocks-public-onlyrolesettler_role" title="Direct link to heading">​</a></h3><blockquote><p>Set the safety block threshold for <code>AssetLockedFund</code> as described  in <code>Asset Locked Funds</code> section. Only the <code>SETTLER_ROLE</code> will be able to call this function.</p><ul><li><code>timeoutBlocks</code> (type <code>uint256</code>): Number of blocks for an Asset Lock to be considered safe to settle</li></ul></blockquote><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deposituint256-tokenamount-external-whennotpaused-nonreentrant"><code>deposit</code>(uint256 tokenAmount) external whenNotPaused nonReentrant<a class="hash-link" href="#deposituint256-tokenamount-external-whennotpaused-nonreentrant" title="Direct link to heading">​</a></h3><blockquote><p>CardHolders can deposit token funds into the Smart Contract using this function. The funds can either be <code>locked</code> or <code>withdrawn</code> by the consumer later. Locked funds cannot be withdrawn until the lock expires, or the user revokes the lock with an Immersve token.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">There is a pre-requisite for this function to work. Because token is an ERC-20 token, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">the consumer needs to approve (https://polygonscan.com/token/0x2791bca1f2de4661ed88a30c99a7a9449aa84174#writeProxyContract#F1 token funds </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">to the Smart Contract public address</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>tokenAmount</code> (type <code>uint256</code>): token Amount to deposit in <code>ethers</code> format</li></ul></blockquote><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deposittouint256-tokenamount-address-sender-external-whennotpaused-nonreentrant"><code>depositTo</code>(uint256 tokenAmount, address sender) external whenNotPaused nonReentrant<a class="hash-link" href="#deposittouint256-tokenamount-address-sender-external-whennotpaused-nonreentrant" title="Direct link to heading">​</a></h3><blockquote><p>CardHolders can deposit token funds for a specific address into the Smart Contract using this function. The funds can either be <code>locked</code> or <code>withdrawn</code> by the consumer later. Locked funds cannot be withdrawn until the lock expires, or the user revokes the lock with an Immersve token.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">There is a pre-requisite for this function to work. Because token is an ERC-20 token, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">the consumer needs to approve (https://polygonscan.com/token/0x2791bca1f2de4661ed88a30c99a7a9449aa84174#writeProxyContract#F1 token funds </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">to the target sender address for the Smart Contract public address</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>tokenAmount</code> (type <code>uint256</code>): token Amount to deposit in <code>ethers</code> format</li><li><code>address</code> (type <code>address</code>): Deposit target address</li></ul></blockquote><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="withdrawuint256-tokenamount-external-whennotpaused-nonreentrant"><code>withdraw</code>(uint256 tokenAmount) external whenNotPaused nonReentrant<a class="hash-link" href="#withdrawuint256-tokenamount-external-whennotpaused-nonreentrant" title="Direct link to heading">​</a></h3><blockquote><p>CardHolders can withdraw token funds associated to their balance from the Smart Contract using this function. Locked funds cannot be withdrawn until the lock expires, or the user revokes the lock with an Immersve token.</p><ul><li><code>tokenAmount</code> (type <code>uint256</code>): token Amount to withdraw in <code>ethers</code> format</li></ul></blockquote><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="createlockedfund-uint256-tokenamount-external-whennotpaused-nonreentrant"><code>createLockedFund</code> (uint256 tokenAmount) external whenNotPaused nonReentrant<a class="hash-link" href="#createlockedfund-uint256-tokenamount-external-whennotpaused-nonreentrant" title="Direct link to heading">​</a></h3><blockquote><p>CardHolders can put a Lock in place for deposited funds so Immersve can authorize the use of a credit card using those locked funds as collateral.
The locked funds will be represented with a <code>AssetLockedFund</code> struct inside the Smart Contract. When created, a timeout will be put in place for this lock based on the default Timeout Blocks (see [])</p><ul><li><code>tokenAmount</code> (type <code>uint256</code>): token Amount to lock in <code>ethers</code> format</li></ul></blockquote><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="depositandcreatelockedfund-uint256-tokenamount-external-whennotpaused-nonreentrant"><code>depositAndCreateLockedFund</code> (uint256 tokenAmount) external whenNotPaused nonReentrant<a class="hash-link" href="#depositandcreatelockedfund-uint256-tokenamount-external-whennotpaused-nonreentrant" title="Direct link to heading">​</a></h3><blockquote><p>Similar to <a href="/contracts/payment-protocol#deposituint256-tokenamount-external-whennotpaused-nonreentrant"><em>deposit</em></a> but combined with <a href="/contracts/payment-protocol#createlockedfund-uint256-tokenamount-external-whennotpaused-nonreentrant"><em>createLockedFund</em></a>. This function is doing both the deposit and the lock at the same time to save gas fees.</p><ul><li><code>tokenAmount</code> (type <code>uint256</code>): token Amount to deposit in <code>ethers</code> format</li></ul></blockquote><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="depositandcreatelockedfundfor-uint256-tokenamount-address-sender-external-whennotpaused-nonreentrant"><code>depositAndCreateLockedFundFor</code> (uint256 tokenAmount, address sender) external whenNotPaused nonReentrant<a class="hash-link" href="#depositandcreatelockedfundfor-uint256-tokenamount-address-sender-external-whennotpaused-nonreentrant" title="Direct link to heading">​</a></h3><blockquote><p>Similar to <a href="/contracts/payment-protocol#depositandcreatelockedfund-uint256-tokenamount-external-whennotpaused-nonreentrant"><em>depositAndCreateLockedFund</em></a> but the target address is specified as an argument instead of using <code>msg.sender</code></p><ul><li><code>tokenAmount</code> (type <code>uint256</code>): token Amount to deposit in <code>ethers</code> format</li></ul></blockquote><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="checklockedfundpayment-address-sender-uint256-price-uint256-lockedfundid-external-view-whennotpaused-returnsuint256"><code>checkLockedFundPayment</code> (address sender, uint256 price, uint256 lockedFundId) external view whenNotPaused returns(uint256)<a class="hash-link" href="#checklockedfundpayment-address-sender-uint256-price-uint256-lockedfundid-external-view-whennotpaused-returnsuint256" title="Direct link to heading">​</a></h3><blockquote><p>Used by Immersve to check that the locked funds of an Immersve Card payment is currently valid. This function will check that the specified address has enough locked funds for the specified <code>lockedFundId</code> and will return the number of blocks that the lock is still valid for.</p><ul><li><code>sender</code> (type <code>address</code>): CardHolder Address doing a payment requiring locked funds with Immersve</li><li><code>price</code> (type <code>uint256</code>): token Amount to settle in <code>ethers</code> format</li><li><code>lockedFundId</code> (type <code>uint256</code>): Matching Locked Fund Id (which is linked to a Card) to settle payment being done with an Immersve Credit Card</li></ul></blockquote><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="confirmlockedfundpayment-address-sender-uint256-price-uint256-lockedfundid-external-whennotpaused-nonreentrant-onlyrolesettler_role"><code>confirmLockedFundPayment</code> (address sender, uint256 price, uint256 lockedFundId) external whenNotPaused nonReentrant onlyRole(SETTLER_ROLE)<a class="hash-link" href="#confirmlockedfundpayment-address-sender-uint256-price-uint256-lockedfundid-external-whennotpaused-nonreentrant-onlyrolesettler_role" title="Direct link to heading">​</a></h3><blockquote><p>Used by Immersve to confirm the settlement of an Immersve Card payment. This function will check that the specified address has enough locked funds for the specified <code>lockedFundId</code> and will transfer the settlement amount (<code>price</code>) to the settlement address, specified in the <a href="/contracts/payment-protocol#initializeaddress-payable-_settlementaddress-address-_tokensmartcontract-uint256-_defaulttimeoutblocks-uint256-_safetyblocks-external-initializer"><code>initialize</code></a> function.
It can only be called by the SETTLER role</p><ul><li><code>sender</code> (type <code>address</code>): CardHolder Address doing a payment requiring locked funds with Immersve</li><li><code>price</code> (type <code>uint256</code>): token Amount to settle in <code>ethers</code> format</li><li><code>lockedFundId</code> (type <code>uint256</code>): Matching Locked Fund Id (which is linked to a Card) to settle payment being done with an Immersve Credit Card</li></ul></blockquote><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="getavailablelockedfundsbalance-address-sender"><code>getAvailableLockedFundsBalance</code> (address sender)<a class="hash-link" href="#getavailablelockedfundsbalance-address-sender" title="Direct link to heading">​</a></h3><blockquote><p>Get Available Locked funds for the specified <code>address</code></p><ul><li><code>sender</code> (type <code>address</code>): CardHolder Address that already did a funds lock</li></ul></blockquote><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="getbalance"><code>getBalance()</code><a class="hash-link" href="#getbalance" title="Direct link to heading">​</a></h3><blockquote><p>Get the available token balance of the <code>msg.sender</code> deposited in the Smart Contract. Balance is not the necessarily the same as locked funds as the former are short lived.</p></blockquote><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="getsenderbalance-address-sender"><code>getSenderBalance</code> (address sender)<a class="hash-link" href="#getsenderbalance-address-sender" title="Direct link to heading">​</a></h3><blockquote><p>Get the available token balance of the specified <code>sender</code> argument, deposited in the Smart Contract. Balance is not the necessarily the same as locked funds as the former are short lived.</p><ul><li><code>sender</code> (type <code>address</code>): CardHolder Address</li></ul></blockquote><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="getlockedfunds"><code>getLockedFunds()</code><a class="hash-link" href="#getlockedfunds" title="Direct link to heading">​</a></h3><blockquote><p>Get the <code>AssetLockedFund</code> objects of the <code>msg.sender</code></p></blockquote><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="getsenderlockedfunds-address-sender-onlyrolesettler_role"><code>getSenderLockedFunds</code> (address sender) onlyRole(SETTLER_ROLE)<a class="hash-link" href="#getsenderlockedfunds-address-sender-onlyrolesettler_role" title="Direct link to heading">​</a></h3><blockquote><p>Get the <code>AssetLockedFund</code> objects of the specified <code>sender</code> argument</p><ul><li><code>sender</code> (type <code>address</code>): CardHolder Address that already locked funds at least once</li></ul></blockquote><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="revokelockedfundmultisig-uint256-lockedfundid-uint256-nonce-bytes-memory-signature-external-whennotpaused-nonreentrant"><code>revokeLockedFundMultiSig</code> (uint256 lockedFundId, uint256 nonce, bytes memory signature) external whenNotPaused nonReentrant<a class="hash-link" href="#revokelockedfundmultisig-uint256-lockedfundid-uint256-nonce-bytes-memory-signature-external-whennotpaused-nonreentrant" title="Direct link to heading">​</a></h3><blockquote><p>CardHolders will be able to revoke a fund lock using an Immersve signature. Immersve will first check if the funds is being used for a payment on Immersve backend.
If the funds are free to release, Immersve will sign a message with a nonce only valid for a <code>lockedFundId</code> and the funds will be put back into the CardHolder balance</p><ul><li><code>lockedFundId</code> (type <code>uint256</code>): Id of the <code>AssetLockedFund</code> to be released</li><li><code>nonce</code> (type <code>uint256</code>): Nonce provided by Immersve API and matches the <code>signature</code></li><li><code>signature</code> (type <code>memory</code>): String signature provided by Immersve API created with a <code>nonce</code> to avoid replay calls</li></ul></blockquote><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="revokelockedfund-address-sender-uint256-lockedfundid-external-whennotpaused-nonreentrant-onlyrolesettler_role"><code>revokeLockedFund</code> (address sender, uint256 lockedFundId) external whenNotPaused nonReentrant onlyRole(SETTLER_ROLE)<a class="hash-link" href="#revokelockedfund-address-sender-uint256-lockedfundid-external-whennotpaused-nonreentrant-onlyrolesettler_role" title="Direct link to heading">​</a></h3><blockquote><p>Function used by Immersve Backend (only SETTLER role can call this function) to revoke an unexpired lock. This could be done if Immersve detect illegal or malicious activity related to the <code>sender</code> and prefers to revoke locked fund ids</p><ul><li><code>sender</code> (type <code>address</code>): CardHolder Address that already locked funds with the Smart Contract</li><li><code>lockedFundId</code> (type <code>uint256</code>): Id of the <code>AssetLockedFund</code> to be released</li></ul></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="immersve-card-e-commerce-payment-happy-path">Immersve Card E-Commerce Payment Happy Path<a class="hash-link" href="#immersve-card-e-commerce-payment-happy-path" title="Direct link to heading">​</a></h2><ul><li>Card Holder locks token funds with Immersve Smart Contract</li><li>Card Holder receives a valid Credit Card to be used for E-Commerce transaction from Immersve</li><li>Card Holder uses the Immersve Card to pay for goods purchased on an E-Commerce platform</li><li>Immersve authorizes the payment with Credit Card network once the locked funds are confirmed</li><li>Purchase is confirmed by Immersve and E-Commerce merchant</li></ul><div class="mermaid" data-mermaid-src="sequenceDiagram
    participant H as Card Holder
    participant W as Web-3 Wallet
    participant I as Immersve Backend
    participant S as Smart Contract
    participant U as token Smart Contract
    participant E as E-Commerce website
    participant M as E-Commerce Merchant
    H-&gt;&gt;I: Create card pre-request
    I--&gt;&gt;H: Web3 Transaction Details
    H-&gt;&gt;W: Submit Transactions
    W-&gt;&gt;U: Approve Card Total Authorized Amount in token
    W-&gt;&gt;S: Deposit and Lock token funds
    S-&gt;&gt;U: Transfer approved amount from Card Holder wallet to Immersve Smart Contract
    S--&gt;&gt;S: Add approved amount to Card Holder address balance
    S--&gt;&gt;S: Create AssetLockedFund to temporarily lock Card Holder funds to be used by Immersve Card
    S--&gt;&gt;W: Transaction Hash
    W--&gt;&gt;H: Transaction Hash
    H-&gt;&gt;I: Card Create Request
    I-&gt;&gt;S: Check enough funds for Card creation
    S--&gt;&gt;I: Locked Funds confirmed
    I--&gt;&gt;H: Card created
    H-&gt;&gt;E: Use Immersve Card to pay for goods online
    E--&gt;&gt;M: Validate Credit Card payment
    M-&gt;&gt;I: Merchant request payment authorization through Credit Card network
    I-&gt;&gt;S: Check locked funds and settle payment amount
    S-&gt;&gt;S: Settle payment funds
    I-&gt;&gt;M: Authorize payment">sequenceDiagram
    participant H as Card Holder
    participant W as Web-3 Wallet
    participant I as Immersve Backend
    participant S as Smart Contract
    participant U as token Smart Contract
    participant E as E-Commerce website
    participant M as E-Commerce Merchant
    H-&gt;&gt;I: Create card pre-request
    I--&gt;&gt;H: Web3 Transaction Details
    H-&gt;&gt;W: Submit Transactions
    W-&gt;&gt;U: Approve Card Total Authorized Amount in token
    W-&gt;&gt;S: Deposit and Lock token funds
    S-&gt;&gt;U: Transfer approved amount from Card Holder wallet to Immersve Smart Contract
    S--&gt;&gt;S: Add approved amount to Card Holder address balance
    S--&gt;&gt;S: Create AssetLockedFund to temporarily lock Card Holder funds to be used by Immersve Card
    S--&gt;&gt;W: Transaction Hash
    W--&gt;&gt;H: Transaction Hash
    H-&gt;&gt;I: Card Create Request
    I-&gt;&gt;S: Check enough funds for Card creation
    S--&gt;&gt;I: Locked Funds confirmed
    I--&gt;&gt;H: Card created
    H-&gt;&gt;E: Use Immersve Card to pay for goods online
    E--&gt;&gt;M: Validate Credit Card payment
    M-&gt;&gt;I: Merchant request payment authorization through Credit Card network
    I-&gt;&gt;S: Check locked funds and settle payment amount
    S-&gt;&gt;S: Settle payment funds
    I-&gt;&gt;M: Authorize payment</div></div></div></div><div class="col col--12"><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/payment">payment</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/protocol">protocol</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/lock">lock</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/settle">settle</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/funds">funds</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/card">card</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/e-commerce">e-commerce</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/purchase">purchase</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/asset">asset</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/assetlockedfund">assetlockedfund</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/expiration">expiration</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/safety">safety</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/threshold">threshold</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/settler">settler</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/deposit">deposit</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/withdraw">withdraw</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/confirm-payment">confirm-payment</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/balance">balance</a></li></ul></div></div></footer></div></article><div class="col col--12"><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/api-reference/upload-a-kyc-resource"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Upload a KYC resource</div></a></nav></div></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#extensions" class="table-of-contents__link toc-highlight">Extensions</a></li><li><a href="#proxy" class="table-of-contents__link toc-highlight">Proxy</a></li><li><a href="#proxy-urls" class="table-of-contents__link toc-highlight">Proxy URLs</a></li><li><a href="#functions" class="table-of-contents__link toc-highlight">Functions</a><ul><li><a href="#initializeaddress-_settlerrole-address-payable-_settlementaddress-address-_tokensmartcontract-uint256-_defaulttimeoutblocks-uint256-_safetyblocks-external-initializer" class="table-of-contents__link toc-highlight"><code>initialize</code>(address _settlerRole, address payable _settlementAddress, address _tokenSmartContract, uint256 _defaultTimeoutBlocks, uint256 _safetyBlocks) external initializer</a></li><li><a href="#getversion-external-pure-returnsstring-memory" class="table-of-contents__link toc-highlight"><code>getVersion()</code> external pure returns(string memory)</a></li><li><a href="#pause-public-onlyrolepauser_role" class="table-of-contents__link toc-highlight"><code>pause()</code> public onlyRole(PAUSER_ROLE)</a></li><li><a href="#unpause-public-onlyrolepauser_role" class="table-of-contents__link toc-highlight"><code>unpause()</code> public onlyRole(PAUSER_ROLE)</a></li><li><a href="#settimeoutblocksuint256-timeoutblocks-public-onlyrolesettler_role" class="table-of-contents__link toc-highlight"><code>setTimeoutBlocks</code>(uint256 timeoutBlocks) public onlyRole(SETTLER_ROLE)</a></li><li><a href="#setsafetyblocksuint256-timeoutblocks-public-onlyrolesettler_role" class="table-of-contents__link toc-highlight"><code>setSafetyBlocks</code>(uint256 timeoutBlocks) public onlyRole(SETTLER_ROLE)</a></li><li><a href="#deposituint256-tokenamount-external-whennotpaused-nonreentrant" class="table-of-contents__link toc-highlight"><code>deposit</code>(uint256 tokenAmount) external whenNotPaused nonReentrant</a></li><li><a href="#deposittouint256-tokenamount-address-sender-external-whennotpaused-nonreentrant" class="table-of-contents__link toc-highlight"><code>depositTo</code>(uint256 tokenAmount, address sender) external whenNotPaused nonReentrant</a></li><li><a href="#withdrawuint256-tokenamount-external-whennotpaused-nonreentrant" class="table-of-contents__link toc-highlight"><code>withdraw</code>(uint256 tokenAmount) external whenNotPaused nonReentrant</a></li><li><a href="#createlockedfund-uint256-tokenamount-external-whennotpaused-nonreentrant" class="table-of-contents__link toc-highlight"><code>createLockedFund</code> (uint256 tokenAmount) external whenNotPaused nonReentrant</a></li><li><a href="#depositandcreatelockedfund-uint256-tokenamount-external-whennotpaused-nonreentrant" class="table-of-contents__link toc-highlight"><code>depositAndCreateLockedFund</code> (uint256 tokenAmount) external whenNotPaused nonReentrant</a></li><li><a href="#depositandcreatelockedfundfor-uint256-tokenamount-address-sender-external-whennotpaused-nonreentrant" class="table-of-contents__link toc-highlight"><code>depositAndCreateLockedFundFor</code> (uint256 tokenAmount, address sender) external whenNotPaused nonReentrant</a></li><li><a href="#checklockedfundpayment-address-sender-uint256-price-uint256-lockedfundid-external-view-whennotpaused-returnsuint256" class="table-of-contents__link toc-highlight"><code>checkLockedFundPayment</code> (address sender, uint256 price, uint256 lockedFundId) external view whenNotPaused returns(uint256)</a></li><li><a href="#confirmlockedfundpayment-address-sender-uint256-price-uint256-lockedfundid-external-whennotpaused-nonreentrant-onlyrolesettler_role" class="table-of-contents__link toc-highlight"><code>confirmLockedFundPayment</code> (address sender, uint256 price, uint256 lockedFundId) external whenNotPaused nonReentrant onlyRole(SETTLER_ROLE)</a></li><li><a href="#getavailablelockedfundsbalance-address-sender" class="table-of-contents__link toc-highlight"><code>getAvailableLockedFundsBalance</code> (address sender)</a></li><li><a href="#getbalance" class="table-of-contents__link toc-highlight"><code>getBalance()</code></a></li><li><a href="#getsenderbalance-address-sender" class="table-of-contents__link toc-highlight"><code>getSenderBalance</code> (address sender)</a></li><li><a href="#getlockedfunds" class="table-of-contents__link toc-highlight"><code>getLockedFunds()</code></a></li><li><a href="#getsenderlockedfunds-address-sender-onlyrolesettler_role" class="table-of-contents__link toc-highlight"><code>getSenderLockedFunds</code> (address sender) onlyRole(SETTLER_ROLE)</a></li><li><a href="#revokelockedfundmultisig-uint256-lockedfundid-uint256-nonce-bytes-memory-signature-external-whennotpaused-nonreentrant" class="table-of-contents__link toc-highlight"><code>revokeLockedFundMultiSig</code> (uint256 lockedFundId, uint256 nonce, bytes memory signature) external whenNotPaused nonReentrant</a></li><li><a href="#revokelockedfund-address-sender-uint256-lockedfundid-external-whennotpaused-nonreentrant-onlyrolesettler_role" class="table-of-contents__link toc-highlight"><code>revokeLockedFund</code> (address sender, uint256 lockedFundId) external whenNotPaused nonReentrant onlyRole(SETTLER_ROLE)</a></li></ul></li><li><a href="#immersve-card-e-commerce-payment-happy-path" class="table-of-contents__link toc-highlight">Immersve Card E-Commerce Payment Happy Path</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Immersve. All rights reserved. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.eef1a545.js"></script>
<script src="/assets/js/main.cbc65626.js"></script>
</body>
</html>