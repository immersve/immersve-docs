"use strict";(self.webpackChunkimmersve_docs=self.webpackChunkimmersve_docs||[]).push([[120],{3905:(e,t,r)=>{r.d(t,{Zo:()=>d,kt:()=>m});var a=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=a.createContext({}),s=function(e){var t=a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):c(c({},t),e)),r},d=function(e){var t=s(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,i=e.originalType,l=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),p=s(r),m=n,h=p["".concat(l,".").concat(m)]||p[m]||u[m]||i;return r?a.createElement(h,c(c({ref:t},d),{},{components:r})):a.createElement(h,c({ref:t},d))}));function m(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=r.length,c=new Array(i);c[0]=p;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:n,c[1]=o;for(var s=2;s<i;s++)c[s]=r[s];return a.createElement.apply(null,c)}return a.createElement.apply(null,r)}p.displayName="MDXCreateElement"},21686:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>s});var a=r(87462),n=(r(67294),r(3905));const i={sidebar_position:2,tags:["card"]},c="Card",o={unversionedId:"guides/card",id:"guides/card",title:"Card",description:"Card State",source:"@site/docs/guides/card.md",sourceDirName:"guides",slug:"/guides/card",permalink:"/guides/card",draft:!1,tags:[{label:"card",permalink:"/tags/card"}],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,tags:["card"]},sidebar:"primarySidebar",previous:{title:"Authentication",permalink:"/guides/authentication"},next:{title:"API Reference",permalink:"/category/api-reference"}},l={},s=[{value:"Card State",id:"card-state",level:2},{value:"Card Usage",id:"card-usage",level:2}],d={toc:s};function u(e){let{components:t,...r}=e;return(0,n.kt)("wrapper",(0,a.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"card"},"Card"),(0,n.kt)("h2",{id:"card-state"},"Card State"),(0,n.kt)("p",null,"After created, the card is activated. when the card is used or canceled by user, it will go to the cancelled state. "),(0,n.kt)("mermaid",{chart:"stateDiagram-v2\n\xa0\xa0\xa0\xa0[*]--\x3e\xa0Active: create\n\n\xa0\xa0\xa0\xa0Active--\x3eCancelled : cancel_card\n    Active--\x3eCancelled : once_used\n\xa0\xa0\xa0\xa0Cancelled --\x3e\xa0[*]"}),(0,n.kt)("h2",{id:"card-usage"},"Card Usage"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Before create a card, users need to transfer USDC from their wallet address to Immersve wallet address. "),(0,n.kt)("li",{parentName:"ol"},"Then they create a card associate with the transaction. Immersve will locked the funds of the transaction in the card for further spending. For security sake, the returned card only include truncated pan and expiry. "),(0,n.kt)("li",{parentName:"ol"},"To get the full pan and cvv2, users need to:",(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"generate one-time use card PAN token from Immersve using ",(0,n.kt)("a",{parentName:"li",href:"/api-reference/generate-card-pan-token"},"this API")),(0,n.kt)("li",{parentName:"ol"},"use the token to get the card's details from E6 mobile API\nExample response payload:")))),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "creationTime": 1663888904887,\n    "modifiedTime": 1663888904887,\n    "id": "1F63FE470D29ABC5C727570C1AD42B82-1000041003",\n    "cardNumber": "5713851215688026472",\n    "panFirst6": "424211",\n    "panLast4": "0528",\n    "type": "virtual",\n    "state": "activated",\n    "sequenceNumber": 1,\n    "cardProfileName": "Test card",\n    "pinFailCount": 0,\n    "reissue": false,\n    "expiry": "202409",\n    "customerNumber": "10000021250574",\n    "embossedName": "CARDHOLDER/IMMERSVE",\n    "programName": "vcc",\n    "pan": "<the full pan of the card>",\n    "cvv2": "<the cvv2 of the card>"\n}\n')),(0,n.kt)("ol",{start:4},(0,n.kt)("li",{parentName:"ol"},"If users authorize a merchant to use the card, credit network will send authorization and clearing request to Immersve, if the transaction are cleared. the card will be cancelled by Immersve automatically."),(0,n.kt)("li",{parentName:"ol"},"If users change their mind before the card is used, they can cancel the card by calling cancel card API. ")),(0,n.kt)("mermaid",{chart:"sequenceDiagram\n    participant U as User\n    participant C as API Client\n    participant I as Immersve\n    participant E as E6 Mobile API\n    participant CN as Credit Network\n    U->>U: Create a transaction that transfers the USDC to Immersve wallet address\n    U->>C : Create a card with the hash of the transaction\n    C->>+I: Create a card with the hash of the transaction\n    I--\x3e>C: Return a Card\n    C--\x3e>U: Return a Card\nloop user want to get the card's detail    \n    C->>I: Request a card pan token\n    C->>E: Validate the card details\nend\nalt if user filled in the card in merchant\n    CN->>I: Authorization of the card\n    I--\x3e>CN: Approved the Authorization of the card\n    CN->>I: Settle the authorization of the card\n    I--\x3e>CN: Clear the authorization\n    I->>I : Cancel the card\nelse the card be cancelled before used\n    C->>I : Cancel the card\n    I--\x3e>-C: card cancelled\nend"}))}u.isMDXComponent=!0}}]);