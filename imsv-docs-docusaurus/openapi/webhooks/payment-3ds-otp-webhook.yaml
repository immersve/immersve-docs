tags: [payments]
summary: Payment 3DS OTP
operationId: payment-3ds-otp
description: |
  Triggered when a one-time password (OTP) is generated to authenticate cardholders
  during a 3D Secure (3DS) transaction. Subscribers should use this event to deliver
  the OTP to the cardholder in their preferred channel.

requestBody:
  content:
    application/json:
      schema:
        allOf:
          - type: object
            properties:
              topic:
                type: string
                example: "payment-3ds-otp"
              payload:
                type: object
                required:
                  - ref
                  - verificationCode
                  - ttl
                  - cardholderId
                  - cardId
                  - cardPanLast4
                  - cardProgramId
                  - merchantName
                  - merchantCountryCode
                  - paymentAcquirerAmount
                  - paymentAcquirerCurrency
                  - deliveryOptions
                properties:
                  ref:
                    type: string
                    example: "51661658-65f8-49d3-a3c0-9f0566671132"
                    description: |
                      A unique reference for the 3DS security challenge. This reference can
                      be used to correlate the challenge to the subsequent payment
                      resource.

                  verificationCode:
                    type: string
                    example: "123456"
                    description: |
                      The 3DS one-time code to deliver to the cardholder.

                  ttl:
                    type: string
                    example: "3600"
                    description: |
                      Time to live for the OTP in seconds.

                  cardholderId:
                    type: string
                    example: "65a7e8ef0d230d0a6bf755e07d39eb02"
                    description: |
                      The id for the cardholder associated with the card.

                  cardId:
                    type: string
                    example: "e2b6ae409cfc11f098ac"
                    description: |
                      The id for the card being loaded.

                  cardPanLast4:
                    type: string
                    example: "4567"
                    description: |
                      The last four digits of the card PAN.

                  cardProgramId:
                    type: string
                    example: "83dee5409cfc11f0a1e6"
                    description: |
                      The card program id for the card.

                  merchantName:
                    type: string
                    example: "Unsworth Height Super"
                    description: |
                      The merchant's name.

                  merchantCountryCode:
                    type: string
                    example: "NZ"
                    description: |
                      The merchant's ISO-3166-1 Alpha-2 country code.

                  paymentAcquirerAmount:
                    type: string
                    example: "978"
                    description: |
                      Payment amount represented in the merchant's local currency. The amount will use fiat minor units. For example 978 GBP is Â£9.78.

                  paymentAcquirerCurrency:
                    type: string
                    example: GBP
                    description: |
                      The merchant's local currency.

                  deliveryOptions:
                    $ref: "../models/delivery-options.yaml"

          - $ref: "./webhook-envelope.yaml"

responses:
  '200':
    $ref: "../models/delivery-options-response.yaml"
