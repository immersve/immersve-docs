tags: [xpay]
summary: XPay Card Load OTP
operationId: xpay-card-load-otp
description: |
  Triggered when a one-time password (OTP) is generated as part of the security
  flow for manually provisioning an XPay card to a digital wallet (Google Pay, Apple Pay or similar).
  Subscribers should use this event to deliver the OTP to
  the cardholder in their preferred channel.

requestBody:
  content:
    application/json:
      schema:
        allOf:
          - type: object
            properties:
              topic:
                type: string
                enum: ["xpay-card-load-otp"]
              payload:
                type: object
                required:
                  - xpayType
                  - verificationCode
                  - cardholderId
                  - cardId
                  - cardPanLast4
                  - cardProgramId
                  - deliveryOptions
                properties:
                  xpayType:
                    type: string
                    example: "google"
                    enum: [apple, generic, google]
                    description: |
                      Type of XPay being used.

                  verificationCode:
                    type: string
                    example: "123456"
                    description: |
                      The XPay one-time code to deliver to the cardholder.

                  cardholderId:
                    type: string
                    example: "e8e48f309cfc11f08711"
                    description: |
                      The Immersve cardholder's account id.

                  cardId:
                    type: string
                    example: "e2b6ae409cfc11f098ac"
                    description: |
                      The Immersve card id for the card being loaded.

                  cardPanLast4:
                    type: string
                    example: "4567"
                    description: |
                      The last four digits of the card PAN.

                  cardProgramId:
                    type: string
                    example: "83dee5409cfc11f0a1e6"
                    description: |
                      The Immersve card program id for the card.

                  deliveryOptions:
                    $ref: "../models/delivery-options.yaml"

          - $ref: "./webhook-envelope.yaml"

responses:
  '200':
    $ref: "../models/delivery-options-response.yaml"
