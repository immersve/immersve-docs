[{"title":"Getting Started","type":0,"sectionRef":"#","url":"","content":"Getting Started Immersve is a multi chain payment protocol and Web3 / Metaverse Mastercard product. Powered by the tech and values of web3, Immersve enables its clients to deliver a decentralized payment experience.","keywords":""},{"title":"Generate Challenge","type":0,"sectionRef":"#","url":"api-reference/authentication/generate-challenge","content":"","keywords":""},{"title":"Operations​","type":1,"pageTitle":"Generate Challenge","url":"api-reference/authentication/generate-challenge#operations","content":"Request a challenge to be signed POST /siwe/generateChallenge curl --location --request POST 'https://app.immersve.com/siwe/generateChallenge' \\ --header 'Content-Type: application/json' \\ --data-raw '{ &quot;walletAddress&quot;: &quot;123&quot;, &quot;chainId&quot;: 123 }'  PAYLOAD:ChallengeRequest RESPONSE: Plain text in EIP-4361 format EXAMPLE RESPONSE PAYLOAD: app.immersve.com wants you to sign in with your Ethereum account: 0xA3058369d6A481B1ff08F62B352409c3D709De9b Sign in with Ethereum to the app. This request will not trigger a blockchain transaction or cost any gas fees. URI: https://app.immersve.com Version: 1 Chain ID: 1 Nonce: 2hFm7TDbZmerUgnrJ Issued At: 2022-08-11T22:29:48.244Z  "},{"title":"Login","type":0,"sectionRef":"#","url":"api-reference/authentication/login","content":"","keywords":""},{"title":"Operations​","type":1,"pageTitle":"Login","url":"api-reference/authentication/login#operations","content":"Exchange signed challenge for the authentication token POST /siwe/login curl 'https://app.immersve.com/siwe/login' \\ --header 'content-type: application/json' \\ --data-raw '{ &quot;message&quot;:&quot;app.immersve.com wants you to sign in with your Ethereum account:\\n0xA3058369d6A481B1ff08F62B352409c3D709De9b\\n\\nBy connecting your wallet and using Immersve, you agree to our Terms of services and Privacy Policy\\n\\nURI: https://app.immersve.com\\nVersion: 1\\nChain ID: 137\\nNonce: ocT89WH9QOmeC6nSF\\nIssued At: 2022-09-22T21:03:01.064Z&quot;,&quot;signature&quot;:&quot;0x4370802f2b4181bf904eb7f34cf928e2b6f32bb7301cf80f4e559989df3249ab4f21548e97fe27ffcb2a7539c9308442865fe8c524b5c936314d7d958fcbc8931b&quot; }'  PAYLOAD: LoginRequest RESPONSE: LoginResponse EXAMPLE RESPONSE PAYLOAD: { &quot;token&quot;: &quot;...&quot;, }  "},{"title":"Cancel card","type":0,"sectionRef":"#","url":"api-reference/card/cancel-card","content":"","keywords":""},{"title":"Models​","type":1,"pageTitle":"Cancel card","url":"api-reference/card/cancel-card#models","content":"Card "},{"title":"Operations​","type":1,"pageTitle":"Cancel card","url":"api-reference/card/cancel-card#operations","content":"Cancel the card PUT /api/cards/orders/{card-id} curl --location --request PUT 'https://api.immersve.com//api/cards/orders/{card-id}' \\ --header &quot;Authorization: Bearer $IMMERSVE_JWT_TOKEN&quot;  RESPONSE: Schema: Card EXAMPLE RESPONSE PAYLOAD: { &quot;id&quot;: &quot;91ad6fea3b52ca58d60d7fd310f789ec&quot;, &quot;externalId&quot;: &quot;8649543161870318367&quot;, &quot;expiry&quot;: &quot;202409&quot;, &quot;accountId&quot;: &quot;057aa15913a57f50577234c8426534c0&quot;, &quot;createdAt&quot;: &quot;2022-09-23T03:52:36.909Z&quot;, &quot;modifiedAt&quot;: &quot;2022-09-23T03:52:36.909Z&quot;, &quot;version&quot;: 1, &quot;type&quot;: &quot;virtual&quot;, &quot;state&quot;: &quot;cancelled&quot; }  "},{"title":"Order card","type":0,"sectionRef":"#","url":"api-reference/card/order-card","content":"","keywords":""},{"title":"Models​","type":1,"pageTitle":"Order card","url":"api-reference/card/order-card#models","content":"Card "},{"title":"Operations​","type":1,"pageTitle":"Order card","url":"api-reference/card/order-card#operations","content":"Create a card by Immersve POST /api/cards/orders curl --location --request POST 'https://api.immersve.com/api/cards/orders' \\ --header 'Authorization: Bearer $IMMERSVE_JWT_TOKEN' \\ --header 'Content-Type: application/json' \\ --data-raw '{ &quot;transactionHash&quot;:&quot;the hash of transaction transferring USDC to Immersve wallet address &quot; }'  RESPONSE: Schema: Card EXAMPLE RESPONSE PAYLOAD: { &quot;id&quot;: &quot;91ad6fea3b52ca58d60d7fd310f789ec&quot;, &quot;externalId&quot;: &quot;8649543161870318367&quot;, &quot;expiry&quot;: &quot;202409&quot;, &quot;accountId&quot;: &quot;057aa15913a57f50577234c8426534c0&quot;, &quot;createdAt&quot;: &quot;2022-09-23T03:52:36.909Z&quot;, &quot;modifiedAt&quot;: &quot;2022-09-23T03:52:36.909Z&quot;, &quot;version&quot;: 1, &quot;type&quot;: &quot;virtual&quot;, &quot;state&quot;: &quot;active&quot; }  "},{"title":"Generate card pan token","type":0,"sectionRef":"#","url":"api-reference/card/generate-card-pan-token","content":"","keywords":""},{"title":"Models​","type":1,"pageTitle":"Generate card pan token","url":"api-reference/card/generate-card-pan-token#models","content":"Token "},{"title":"Operations​","type":1,"pageTitle":"Generate card pan token","url":"api-reference/card/generate-card-pan-token#operations","content":"Generate a token to get card's detail POST /api/cards/{card-id}/panToken curl --location --request POST 'https://api.immersve.com/api/cards/{card-id}/panToken' \\ --header &quot;Authorization: Bearer $IMMERSVE_JWT_TOKEN&quot;  RESPONSE: Schema: Token EXAMPLE RESPONSE PAYLOAD: { &quot;tokenId&quot;: &quot;1E2426184B3676720F36E43A22649AFF-1000041153&quot;, }  Get the card's details from E6 mobile API POST E6_MOBILE_BASE_URL/v1/auth/pan/token/validate curl --location --request POST 'https://E6_MOBILE_BASE_URL/v1/auth/pan/token/validate' \\ --data-raw '{ &quot;tokenId&quot;:&quot;A token got from above operation&quot; }'  RESPONSE: Schema: The schema is defined in external provider's website The response must contains fields: pan and cvv2 EXAMPLE RESPONSE PAYLOAD: { &quot;creationTime&quot;: 1663888904887, &quot;modifiedTime&quot;: 1663888904887, &quot;id&quot;: &quot;1F63FE470D29ABC5C727570C1AD42B82-1000041003&quot;, &quot;cardNumber&quot;: &quot;5713851215688026472&quot;, &quot;panFirst6&quot;: &quot;424211&quot;, &quot;panLast4&quot;: &quot;0528&quot;, &quot;type&quot;: &quot;virtual&quot;, &quot;state&quot;: &quot;activated&quot;, &quot;sequenceNumber&quot;: 1, &quot;cardProfileName&quot;: &quot;Test card&quot;, &quot;pinFailCount&quot;: 0, &quot;reissue&quot;: false, &quot;expiry&quot;: &quot;202409&quot;, &quot;customerNumber&quot;: &quot;10000021250574&quot;, &quot;embossedName&quot;: &quot;CARDHOLDER/IMMERSVE&quot;, &quot;programName&quot;: &quot;vcc&quot;, &quot;pan&quot;: &quot;&lt;the full pan of the card&gt;&quot;, &quot;cvv2&quot;: &quot;&lt;the cvv2 of the card&gt;&quot; }  "},{"title":"Currency List","type":0,"sectionRef":"#","url":"api-reference/currency/currency-list","content":"","keywords":""},{"title":"Models​","type":1,"pageTitle":"Currency List","url":"api-reference/currency/currency-list#models","content":"Currency "},{"title":"Operations​","type":1,"pageTitle":"Currency List","url":"api-reference/currency/currency-list#operations","content":"Get list of supported currencies by Immersve GET /api/currencies curl https://api.immersve.com/api/currencies \\ -H &quot;Authorization: Bearer $IMMERSVE_JWT_TOKEN&quot;  RESPONSE: Schema: Array&lt;Currency&gt; EXAMPLE RESPONSE PAYLOAD: [ { &quot;symbol&quot;: &quot;KYD&quot;, &quot;label&quot;: &quot;CAYMAN ISLAND DOLLAR&quot; },{ &quot;symbol&quot;: &quot;JPY&quot;, &quot;label&quot;: &quot;JAPANESE YEN&quot; },{ &quot;symbol&quot;: &quot;NZD&quot;, &quot;label&quot;: &quot;NEW ZEALAND DOLLAR&quot; },{ &quot;symbol&quot;: &quot;USD&quot;, &quot;label&quot;: &quot;UNITED STATES DOLLAR&quot; } ]  "},{"title":"Currency Convert","type":0,"sectionRef":"#","url":"api-reference/currency/currency-convert","content":"","keywords":""},{"title":"Models​","type":1,"pageTitle":"Currency Convert","url":"api-reference/currency/currency-convert#models","content":"Currency Conversion "},{"title":"Operations​","type":1,"pageTitle":"Currency Convert","url":"api-reference/currency/currency-convert#operations","content":"Convert a source currency to a target currency using Mastercard rates GET /api/currency/convert?currency={sourceCurrency}&amp;targetCurrency={targetCurrency}&amp;amount={amountToConvert}&amp;fee={extraFee} curl https://api.immersve.com/api/currency/convert?currency=NZD&amp;targetCurrency=USD&amp;amount=1000 \\ -H &quot;Authorization: Bearer $IMMERSVE_JWT_TOKEN&quot;  PARAMETERS: Field\tType\tRequired\tDescriptioncurrency\tString\tX\tThe currency alpha code to convert from amount\tNumber\tX\tThe amount of currency to convert to destination currency targetCurrency\tString The target currency alpha code for the conversion. Defaults to USD fee\tNumber Optional fee added on top of the conversion. Defaults to 0 RESPONSE: Schema: Currency Conversion EXAMPLE RESPONSE PAYLOAD: { &quot;currency&quot;: &quot;NZD&quot;, &quot;convertedCurrency&quot;: &quot;USD&quot;, &quot;amount&quot;: 1000, &quot;convertedAmount&quot;: 696.2285, &quot;rate&quot;: 0.6962285 }  "},{"title":"Authentication","type":0,"sectionRef":"#","url":"guides/authentication","content":"","keywords":""},{"title":"Login Flow​","type":1,"pageTitle":"Authentication","url":"guides/authentication#login-flow","content":"sequenceDiagram participant M as Web-3 Wallet participant C as API Client participant I as Immersve C-&gt;&gt;+I: Get EIP-4361 challenge I--&gt;&gt;-C: Challenge C-&gt;&gt;M: Request to sign an EIP-4361 message M--&gt;&gt;C: Signature C-&gt;&gt;+I: Send EIP-4361 message + signature I--&gt;&gt;-C: Return JWT Token note over C: JWT Token will be used for the following requests to Immersve API Request EIP-4361 challenge. The response is a EIP-4361 message to be signed by the wallet in plain text, for example: app.immersve.com wants you to sign in with your Ethereum account: 0xA3058369d6A481B1ff08F62B352409c3D709De9b Sign in with Ethereum to the app. This request will not trigger a blockchain transaction or cost any gas fees. URI: https://app.immersve.com Version: 1 Chain ID: 1 Nonce: 2hFm7TDbZmerUgnrJ Issued At: 2022-08-11T22:29:48.244Z Invoke the wallet's signing capability to get a signature for the challenge message. This part's implementation is specific to the wallet used, but it is fair to say that this abstract function is available in all wallets. Submit the signed challenge with its signature to get the authentication token The received token should be used for consequent requests to protected resources in the Authorization header "},{"title":"Card","type":0,"sectionRef":"#","url":"guides/card","content":"","keywords":""},{"title":"Card State​","type":1,"pageTitle":"Card","url":"guides/card#card-state","content":"After created, the card is activated. when the card is used or canceled by user, it will go to the cancelled state. stateDiagram-v2 [*]--&gt; Active: create Active--&gt;Cancelled : cancel_card Active--&gt;Cancelled : once_used Cancelled --&gt; [*] "},{"title":"Card Usage​","type":1,"pageTitle":"Card","url":"guides/card#card-usage","content":"Before create a card, users need to transfer USDC from their wallet address to Immersve wallet address. Then they create a card associate with the transaction. Immersve will locked the funds of the transaction in the card for further spending. For security sake, the returned card only include truncated pan and expiry. To get the full pan and cvv2, users need to generate card pan token from Immersve that will be used to get full pan and cvv2 from E6 Mobile API. If users authorize a merchant to use the card, credit network will send authorization and clearing request to Immersve, if the transaction are cleared. the card will be cancelled by Immersve automatically.If users change their mind before the card is used, they can cancel the card by calling cancel card API.  sequenceDiagram participant U as User participant C as API Client participant I as Immersve participant E as E6 Mobile API participant CN as Credit Network U-&gt;&gt;U: Create a transaction that transfers the USDC to Immersve wallet address U-&gt;&gt;C : Create a card with the hash of the transaction C-&gt;&gt;+I: Create a card with the hash of the transaction I--&gt;&gt;C: Return a Card C--&gt;&gt;U: Return a Card loop user want to get the card's detail C-&gt;&gt;I: Request a card pan token C-&gt;&gt;E: Validate the card details end alt if user filled in the card in merchant CN-&gt;&gt;I: Authorization of the card I--&gt;&gt;CN: Approved the Authorization of the card CN-&gt;&gt;I: Settle the authorization of the card I--&gt;&gt;CN: Clear the authorization I-&gt;&gt;I : Cancel the card else the card be cancelled before used C-&gt;&gt;I : Cancel the card I--&gt;&gt;-C: card cancelled end "},{"title":"Card","type":0,"sectionRef":"#","url":"models/card-model","content":"","keywords":""},{"title":"Model​","type":1,"pageTitle":"Card","url":"models/card-model#model","content":"Field\tType\tDescriptionaccountId\tString\tWhich account this card belongs to cardExternalId\tInteger\tThe external id for this card cardCurrency\tString\tThe currency of this card cardState\tString\tThe state of the card, enum &quot;active&quot;, &quot;cancelled&quot; cardType\tString\tThe type of the card, Now only support &quot;virtual&quot; panFirst6\tString\tThe first 6 digits of the card panLast4\tString\tThe last 4 digits of the card expiry\tString\tThe expiry of the card "},{"title":"CurrencyConversion","type":0,"sectionRef":"#","url":"models/currency-conversion-model","content":"","keywords":""},{"title":"Model​","type":1,"pageTitle":"CurrencyConversion","url":"models/currency-conversion-model#model","content":"Field\tType\tDescriptioncurrency\tString\tThe currency to convert from targetCurrency\tString\tThe target currency for the conversion convertedCurrency\tString\tThe currency converted to amount\tNumber\tThe amount of currency to convert to destination currency convertedAmount\tNumber\tThe resulting amount of the conversion from currency into convertedCurrency rate\tNumber\tThe conversion rate from currency to convertedCurrency "},{"title":"ChallengeRequest","type":0,"sectionRef":"#","url":"models/challenge-request","content":"","keywords":""},{"title":"Model​","type":1,"pageTitle":"ChallengeRequest","url":"models/challenge-request#model","content":"Field\tType\tDescriptionwalletAddress\tString\tWallet Address chainId\tInteger\tChain Id "},{"title":"LoginRequest","type":0,"sectionRef":"#","url":"models/login-request","content":"","keywords":""},{"title":"Model​","type":1,"pageTitle":"LoginRequest","url":"models/login-request#model","content":"Field\tType\tDescriptionmessage\tString\tThe EIP-4361 challenge signature\tString\tSignature obtained by signing the message with the wallet "},{"title":"Currency","type":0,"sectionRef":"#","url":"models/currency-model","content":"","keywords":""},{"title":"Model​","type":1,"pageTitle":"Currency","url":"models/currency-model#model","content":"Field\tType\tDescriptionsymbol\tString\tThe Alpha code for the currency. label\tString\tThe full name of the currency. "},{"title":"Token","type":0,"sectionRef":"#","url":"models/token-model","content":"","keywords":""},{"title":"Model​","type":1,"pageTitle":"Token","url":"models/token-model#model","content":"Field\tType\tDescriptiontoken\tString\ta token "},{"title":"LoginResponse","type":0,"sectionRef":"#","url":"models/login-response","content":"","keywords":""},{"title":"Model​","type":1,"pageTitle":"LoginResponse","url":"models/login-response#model","content":"Field\tType\tDescriptiontoken\tString\tThe token to be used in the authorization header "}]